

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>3. Running the standalone ice sheet model within CESM: TG compsets &#8212; CESM Land Ice CESM2.0 documentation</title>
    <link rel="stylesheet" href="_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. The dynamic ice sheet model" href="dynamic-ice-sheet-model.html" />
    <link rel="prev" title="2. Running and modifying the CESM land ice component" href="running-and-modifying.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dynamic-ice-sheet-model.html" title="4. The dynamic ice sheet model"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="running-and-modifying.html" title="2. Running and modifying the CESM land ice component"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CESM Land Ice CESM2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3. Running the standalone ice sheet model within CESM: TG compsets</a><ul>
<li><a class="reference internal" href="#background">3.1. Background</a></li>
<li><a class="reference internal" href="#running-with-existing-forcing-data">3.2. Running with existing forcing data</a></li>
<li><a class="reference internal" href="#creating-and-running-with-your-own-forcing-data">3.3. Creating and running with your own forcing data</a></li>
<li><a class="reference internal" href="#performing-a-run-to-create-forcing-data">3.4. Performing a run to create forcing data</a></li>
<li><a class="reference internal" href="#performing-a-tg-run-using-your-own-forcing-data">3.5. Performing a TG run using your own forcing data</a></li>
<li><a class="reference internal" href="#changes-to-some-cesm-defaults-for-tg-compsets">3.6. Changes to some CESM defaults for TG compsets</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="running-and-modifying.html"
                        title="previous chapter">2. Running and modifying the CESM land ice component</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dynamic-ice-sheet-model.html"
                        title="next chapter">4. The dynamic ice sheet model</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tg-compsets.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="running-the-standalone-ice-sheet-model-within-cesm-tg-compsets">
<span id="tg-compsets"></span><h1>3. Running the standalone ice sheet model within CESM: TG compsets<a class="headerlink" href="#running-the-standalone-ice-sheet-model-within-cesm-tg-compsets" title="Permalink to this headline">¶</a></h1>
<div class="section" id="background">
<h2>3.1. Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>The ice sheet model requires much less computational time per simulated
year than other CESM components, but often needs to be run for many more
model years (e.g., tens of thousands of years rather than a century).
Thus, it can be desirable to run CISM in standalone mode, forced by
output from a previous CESM run. In this way, you can cycle many times
through the forcing data from a previous run (e.g., to spin up the ice
sheet model), or run parameter sensitivity analyses much faster than you
could within the coupled system.</p>
<p>A run with standalone CISM in the CESM context is known as a TG compset.
This compset uses the active ice sheet model forced by a data land
model; all other components are stubs. Before running a TG compset, you
must have coupler history files from a previous run that included CLM
(see Section 3.2). Alternatively, you can run with existing forcing data
(see Section 3.3).</p>
</div>
<div class="section" id="running-with-existing-forcing-data">
<h2>3.2. Running with existing forcing data<a class="headerlink" href="#running-with-existing-forcing-data" title="Permalink to this headline">¶</a></h2>
<p>There are currently four out-of-the-box TG compsets, using different
periods of forcing data, as shown in the following table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="16%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Compset alias</th>
<th class="head">Compset short name</th>
<th class="head">Forcing data</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TG</td>
<td>TG2000_G1</td>
<td>From a BG20TRCN run (20:sup:<cite>th</cite> century transient, fully coupled), years 1976 –&nbsp;2005</td>
</tr>
<tr class="row-odd"><td>TG1850</td>
<td>TG1850_G1</td>
<td>From a BG1850CN run (preindustrial spinup, fully coupled)</td>
</tr>
<tr class="row-even"><td>TG20TR</td>
<td>TG20TR_G1</td>
<td>From a BG20TRCN run (20:sup:<cite>th</cite> century transient, fully coupled), years 1850 –&nbsp;2005</td>
</tr>
<tr class="row-odd"><td>TGRCP85</td>
<td>TGRCP8_G1</td>
<td>From a BGRCP85 run (21:sup:<cite>st</cite> century, RCP 8.5 scenario, fully coupled), years 2006 –&nbsp;2100</td>
</tr>
</tbody>
</table>
<p>The fully-coupled runs that provided the forcing data for these compsets
are described in a file in the CESM inputdata repository, alongside the
forcing data
(<a class="reference external" href="https://svn-ccsm-inputdata.cgd.ucar.edu/trunk/inputdata/lnd/dlnd7/CPLHIST_SNO/run_documentation.txt_c120808.txt">https://svn-ccsm-inputdata.cgd.ucar.edu/trunk/inputdata/lnd/dlnd7/CPLHIST_SNO/run_documentation.txt_c120808.txt</a>).</p>
<p>To run with one of these existing sets of forcing data, simply create a
case with one of the above compsets. <strong>The resolution for this run
should be f09_g16, since that is the resolution at which the forcing
data were created.</strong> (In theory, you can run using a different
resolution, but that will involve a spatial interpolation of the forcing
data.) You <em>can</em> run with a different CISM_GRID than the one used to
create the forcing data (gland5UM).</p>
</div>
<div class="section" id="creating-and-running-with-your-own-forcing-data">
<h2>3.3. Creating and running with your own forcing data<a class="headerlink" href="#creating-and-running-with-your-own-forcing-data" title="Permalink to this headline">¶</a></h2>
<p>Currently, TG compsets are only able to handle forcing data from a
previous CESM run (although, in theory, it should be possible to “fake”
CESM output by creating files with the same format as existing TG
forcing files). Thus, performing a TG run with your own forcing data is
a two-step process: (1) Perform a CESM run that includes an active land
model (CLM), saving the necessary forcing files, and (2) perform a TG
run using these new forcing data.</p>
</div>
<div class="section" id="performing-a-run-to-create-forcing-data">
<h2>3.4. Performing a run to create forcing data<a class="headerlink" href="#performing-a-run-to-create-forcing-data" title="Permalink to this headline">¶</a></h2>
<p>To create the necessary forcing data (surface mass balance and surface
temperature in each glacier elevation class), you need to perform a CESM
run using a compset that includes an active land model (CLM) and an
active ice sheet model (CISM). This can be done with IG, FG or BG
compsets, or their variations.</p>
<p>In order to save the necessary forcing data, you need to set the driver
namelist variable, histaux_s2x1yr. This can be set by adding the
following line to user_nl_cpl in your case directory:</p>
<blockquote>
<div>histaux_s2x1yr = .true.</div></blockquote>
<p>This will cause the coupler to write out annual averages of the forcing
fields sent from CLM to CISM. The files containing these averages will
appear in the cpl/hist directory within your archive space, with names
like:</p>
<blockquote>
<div>$CASE.cpl.hs2x.0001-01-01.nc</div></blockquote>
<p>A TG run that later uses these coupler history files as forcing should
give <em>nearly</em> identical CISM results as the original run. Small
differences arise because these forcing files are written with single
precision, leading to roundoff error on the order of 10<sup>-7</sup>. If
you need exact reproducibility, you can make a small source code
modification prior to performing this run: In the routine
<em>seq_hist_writeaux</em> in models/drv/driver/seq_hist_mod.F90, change
the four instances of use_float=.true. to use_float=.false.</p>
</div>
<div class="section" id="performing-a-tg-run-using-your-own-forcing-data">
<h2>3.5. Performing a TG run using your own forcing data<a class="headerlink" href="#performing-a-tg-run-using-your-own-forcing-data" title="Permalink to this headline">¶</a></h2>
<p>To perform a standalone CISM run forced by your newly-created forcing
data, first create a new case using one of the existing TG compsets (see
above table). It can be easiest to use the compset whose forcing data
most closely matches yours (e.g., if you are using forcing data from a
future RCP simulation, then use TGRCP85), but the choice of TG compset
does not matter as long as you take care in setting the necessary xml
variables appropriately, as described below. The resolution of the TG
run (as specified by the -res flag to create_newcase) should match the
resolution of the run used to create the forcing data. You <em>can</em> run
with a different CISM_GRID than the one used to create the forcing
data.</p>
<p>The following variables in env_run.xml should be modified appropriately
for your forcing data:</p>
<p>DLND_CPLHIST_DIR: Directory in which your cpl.hs2x files can be found</p>
<p>DLND_CPLHIST_CASE: Name of the case used to create the cpl.hs2x files
(files are assumed to be named
$DLND_CPLHIST_CASE.cpl.hs2x.yyyy-01-01.nc)</p>
<p>DLND_CPLHIST_YR_START: First year of forcing data (can be set later
than the first existing year of data if you want to use a subset of the
available years)</p>
<p>DLND_CPLHIST_YR_END: Last year of forcing data (can be set earlier
than the last existing year of data if you want to use a subset of the
available years)</p>
<p>RUN_STARTDATE: Determines the model year in which the run starts. This
can be set to anything you want, but a good convention is:</p>
<ul>
<li><p class="first">For transient TG runs forced by output from a transient CESM run, set
to the first year of forcing data (this corresponds to the real-world
year, in some sense)</p>
</li>
<li><p class="first">For non-transient TG runs (forced either by output from a
non-transient run, or by cycling through the available forcing data
multiple times), set to 0001-01-01 (in this case, there is no
real-world meaning to the start year)</p>
<p>DLND_CPLHIST_YR_ALIGN: The simulation year corresponding to
DLND_CPLHIST_YR_START. This will usually be the same as the year
in RUN_STARTDATE, but it can be set to a different year to start the
simulation with a different year of forcing data.</p>
<p>GLC_NEC: The number of glacier elevation classes. This must agree
with the value used in the run that created the forcing data.</p>
</li>
<li><p class="first">preview_namelists</p>
</li>
<li><p class="first">cp CaseDocs/dlnd.streams.txt.sno.cplhist
./user_dlnd.streams.txt.sno.cplhist</p>
</li>
<li><p class="first">chmod u+w user_dlnd.streams.txt.sno.cplhist</p>
</li>
</ul>
<p>Then change the domain file in <em>user_dlnd.streams.txt.sno.cplhist</em> to
correspond to the domain file that was used for the run that created the
forcing data. This file is listed in the <em>fileNames</em> subsection of the
<em>domainInfo</em> section in that file, and is currently hard-coded to
<em>domain.lnd.fv0.9x1.25_gx1v6.090309.nc</em>.</p>
<p><strong>Important note:</strong> Once you have created a
<em>user_dlnd.streams.txt.sno.cplhist</em> file, further changes to the
<em>DLND_*</em> variables in <em>env_run.xml</em> will not be picked up correctly
by the scripts. Thus, if you need to change any of these variables,
first remove the <em>user_dlnd.streams.txt.sno.cplhist</em> file, then make
necessary modifications to these xml variables. Finally, repeat the
above procedure for modifying the domain file.</p>
</div>
<div class="section" id="changes-to-some-cesm-defaults-for-tg-compsets">
<h2>3.6. Changes to some CESM defaults for TG compsets<a class="headerlink" href="#changes-to-some-cesm-defaults-for-tg-compsets" title="Permalink to this headline">¶</a></h2>
<p>TG compsets have much lower computational expense per simulation year
and much greater typical run lengths compared to most CESM
configurations. Thus, a number of settings are changed automatically
when running with a TG compset. These include:</p>
<p>Default run length: 10 years (rather than 5 days)</p>
<p>Default coupling frequency: annual (rather than daily or more frequent)</p>
<p>Default PE layout: single processor</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="dynamic-ice-sheet-model.html" title="4. The dynamic ice sheet model"
             >next</a> |</li>
        <li class="right" >
          <a href="running-and-modifying.html" title="2. Running and modifying the CESM land ice component"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CESM Land Ice CESM2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Gunter Leguy, William Lipscomb, Bill Sacks.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>