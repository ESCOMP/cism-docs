

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Running the standalone ice sheet model within CESM: T compsets &mdash; CESM Land Ice cesm2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="CESM Land Ice cesm2.0 documentation" href="index.html"/>
        <link rel="next" title="4. The dynamic ice sheet model" href="dynamic-ice-sheet-model.html"/>
        <link rel="prev" title="2. Running and modifying the CESM land ice component" href="running-and-modifying.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> CESM Land Ice
          

          
          </a>

          
            
            
              <div class="version">
                
                  <div class="version-dropdown">
                    <select class="version-list" id="version-list">
                      <option value=''>cesm2.0</option>
                      
                        
                          <option value="../../master/html">master</option>
                        
                      
                        
                      
                    </select>
                  </div>
                
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="running-and-modifying.html">2. Running and modifying the CESM land ice component</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Running the standalone ice sheet model within CESM: T compsets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#background">3.1. Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-with-existing-forcing-data">3.2. Running with existing forcing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-and-running-with-your-own-forcing-data">3.3. Creating and running with your own forcing data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#performing-a-run-to-create-forcing-data">3.3.1. Performing a run to create forcing data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performing-a-t-compset-run-using-your-own-forcing-data">3.3.2. Performing a T compset run using your own forcing data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#changes-to-some-cesm-defaults-for-t-compsets">3.4. Changes to some CESM defaults for T compsets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dynamic-ice-sheet-model.html">4. The dynamic ice sheet model</a></li>
<li class="toctree-l1"><a class="reference internal" href="controlling-output.html">5. Controlling output from CISM and CLM</a></li>
<li class="toctree-l1"><a class="reference internal" href="clm-cism-coupling.html">6. Coupling CLM and CISM</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">7. Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">8. References</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="new-grids.html">A.1&nbsp;&nbsp;&nbsp;Introducing a new ice sheet grid</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CESM Land Ice</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>3. Running the standalone ice sheet model within CESM: T compsets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/t-compsets.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-the-standalone-ice-sheet-model-within-cesm-t-compsets">
<span id="t-compsets"></span><h1>3. Running the standalone ice sheet model within CESM: T compsets<a class="headerlink" href="#running-the-standalone-ice-sheet-model-within-cesm-t-compsets" title="Permalink to this headline">¶</a></h1>
<div class="section" id="background">
<h2>3.1. Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h2>
<p>The ice sheet model requires much less computational time per simulated
year than other CESM components, but often needs to be run for many more
model years (e.g., tens of thousands of years rather than a century).
Thus, it can be desirable to run CISM in standalone mode, forced by
output from a previous CESM run. In this way, you can cycle many times
through the forcing data from a previous run (e.g., to spin up the ice
sheet model), or run parameter sensitivity analyses much faster than you
could within the coupled system.</p>
<p>A run with standalone CISM in the CESM context is known as a T compset. (In the past this
was referred to as a TG compset. Now the G appears near the end of the compset name, so
compsets have names like T1850G.)  This compset uses the active ice sheet model forced by
a data land model; all other components are stubs. Before running a T compset, you must
have coupler history files from a previous run that included CLM (version 4.5 or
later). You can run with either existing forcing data (see <a class="reference internal" href="#t-with-existing-data"><span class="std std-numref">Section 3.2</span></a>)
or with your own forcing data (see <a class="reference internal" href="#t-with-your-own-data"><span class="std std-numref">Section 3.3</span></a>).</p>
</div>
<div class="section" id="running-with-existing-forcing-data">
<span id="t-with-existing-data"></span><h2>3.2. Running with existing forcing data<a class="headerlink" href="#running-with-existing-forcing-data" title="Permalink to this headline">¶</a></h2>
<p>There is currently just a single set of forcing data available for running T
compsets. These forcing data were created with software testing rather than scientific
validity in mind. They were created from 30 years of an <code class="docutils literal notranslate"><span class="pre">I1850Clm50Sp</span></code> compset (CLM
forced by a data atmosphere with GSWP3 forcing, starting from an already-near-spun-up
state, with nominally year-1850 forcings and satellite phenology). The resolution was
<code class="docutils literal notranslate"><span class="pre">f09_g17</span></code>. The code base was close to the final CESM2.0 release. For more details, see
<a class="reference external" href="https://svn-ccsm-inputdata.cgd.ucar.edu/trunk/inputdata/lnd/dlnd7/CPLHIST_SNO/i.e20.I1850Clm50Sp.f09_g17.001_c180502/README">https://svn-ccsm-inputdata.cgd.ucar.edu/trunk/inputdata/lnd/dlnd7/CPLHIST_SNO/i.e20.I1850Clm50Sp.f09_g17.001_c180502/README</a>.</p>
<p>There are two out-of-the-box T compsets that use these forcing data: T1850G, which uses
CISM2, and T1850G1, which uses CISM1. <strong>You should run these compsets at f09_g17
resolution — i.e., with the same land resolution and ocean mask used to create the
forcing data.</strong> You can use any CISM resolution, although the current forcing data only
have complete forcings for Greenland, not Antarctica.</p>
<p>So a typical <code class="docutils literal notranslate"><span class="pre">create_newcase</span></code> command when running with CISM2, with the standard 4-km
Greenland grid, would look like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./create_newcase --case my_t_case --compset T1850G --res f09_g17_gl4</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-and-running-with-your-own-forcing-data">
<span id="t-with-your-own-data"></span><h2>3.3. Creating and running with your own forcing data<a class="headerlink" href="#creating-and-running-with-your-own-forcing-data" title="Permalink to this headline">¶</a></h2>
<p>Currently, T compsets are only able to handle forcing data from a previous CESM run
(although, in theory, it should be possible to “fake” CESM output by creating files with
the same format as existing T compset forcing files). Thus, performing a T compset run
with your own forcing data is a two-step process: (1) Perform a CESM run that includes an
active land model (CLM), saving the necessary forcing files, and (2) perform a T compset
run using these new forcing data.</p>
<div class="section" id="performing-a-run-to-create-forcing-data">
<h3>3.3.1. Performing a run to create forcing data<a class="headerlink" href="#performing-a-run-to-create-forcing-data" title="Permalink to this headline">¶</a></h3>
<p>To create the necessary forcing data (surface mass balance and surface temperature in each
glacier elevation class, along with surface elevation for the coupler’s vertical
downscaling), you need to perform a CESM run using a compset that includes an active land
model (CLM). It does not matter whether the glc component is fully-active
(<code class="docutils literal notranslate"><span class="pre">CISM2%EVOLVE</span></code>), active but non-evolving (<code class="docutils literal notranslate"><span class="pre">CISM2%NOEVOLVE</span></code>) or a stub model
(<code class="docutils literal notranslate"><span class="pre">SGLC</span></code>). If running with CISM, CISM’s domain and resolution also do not matter (because
forcing data are saved prior to downscaling to the CISM grid).</p>
<p>However, CLM’s <code class="docutils literal notranslate"><span class="pre">GLACIER_REGION</span></code> field (on the surface dataset) <em>does</em> matter: Surface
mass balance and temperature forcing fields will only be valid in regions whose glacier
region behaviors are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">glacier_region_behavior</span> <span class="pre">=</span> <span class="pre">virtual</span></code>: This is needed in order to provide downscaled
forcings for all CISM grid cells.</li>
<li><code class="docutils literal notranslate"><span class="pre">glacier_region_melt_behavior</span> <span class="pre">=</span> <span class="pre">replaced_by_ice</span></code>: This is needed in order to compute
SMB throughout the CISM domain.</li>
</ul>
<p>Thus, you must ensure that there are one or more CLM glacier regions encompassing the full
CISM grid(s) that you intend to use in the T compset run, whose glacier region behaviors
are those given above.</p>
<p>In order to save the necessary forcing data, you need to set the driver namelist variable,
<code class="docutils literal notranslate"><span class="pre">histaux_l2x1yrg</span></code>. (This variable name should be read as: coupler auxiliary history file
(“histaux”) for fields sent from land to coupler (“l2x”) with a 1-year frequency (“1yr”),
just focused on glacier-related fields (“g”).) This can be set by adding the following
line to <code class="docutils literal notranslate"><span class="pre">user_nl_cpl</span></code> in your case directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">histaux_l2x1yrg = .true.</span>
</pre></div>
</div>
<p>This will cause the coupler to write out annual averages of the forcing fields sent from
CLM to CISM (on the CLM grid, separated by elevation class). The files containing these
averages will appear in the cpl/hist directory within your archive space, with names like:
<code class="docutils literal notranslate"><span class="pre">$CASE.cpl.hl2x1yr_glc.0001-01-01.nc</span></code>. (For a typical 1-degree land resolution, these
files are about 7 MB per year.)</p>
<p>A T compset run that later uses these coupler history files as forcing should
give <em>nearly</em> identical CISM results as the original run. Small
differences arise because these forcing files are written with single
precision, leading to roundoff error on the order of 10<sup>-7</sup>. If you need more
precision, you can add the following to <code class="docutils literal notranslate"><span class="pre">user_nl_cpl</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">histaux_double_precision = .true.</span>
</pre></div>
</div>
<p>This will give you double precision output, at the expense of roughly doubling the output
volume. Short tests have shown that this change allows the T compset run to match the
original within double-precision roundoff-level.</p>
</div>
<div class="section" id="performing-a-t-compset-run-using-your-own-forcing-data">
<h3>3.3.2. Performing a T compset run using your own forcing data<a class="headerlink" href="#performing-a-t-compset-run-using-your-own-forcing-data" title="Permalink to this headline">¶</a></h3>
<p>To perform a standalone CISM run forced by your newly-created forcing data, first create a
new case using one of the existing T compsets (e.g., T1850G). The land and ocean
resolutions of the T compset run (as specified by the <code class="docutils literal notranslate"><span class="pre">--res</span></code> flag to
<code class="docutils literal notranslate"><span class="pre">create_newcase</span></code>) should match the resolution of the run used to create the forcing
data. You <em>can</em> run with a different glc resolution than the one used to create the
forcing data. So, for example, if you created the forcing data from an I or B compset with
resolution <code class="docutils literal notranslate"><span class="pre">f09_g17_gl4</span></code>, the T compset run should use resolution <code class="docutils literal notranslate"><span class="pre">f09_g17_xxx</span></code>, where
any value of <code class="docutils literal notranslate"><span class="pre">xxx</span></code> is acceptable.</p>
<p>The following variables in <code class="docutils literal notranslate"><span class="pre">env_run.xml</span></code> should be modified appropriately for your
forcing data:</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">DLND_CPLHIST_DIR</span></code>: Directory in which your <code class="docutils literal notranslate"><span class="pre">cpl.hl2x1yr_glc</span></code> files can be found</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">DLND_CPLHIST_CASE</span></code>: Name of the case used to create the <code class="docutils literal notranslate"><span class="pre">cpl.hl2x1yr_glc</span></code> files
(files are assumed to be named <code class="docutils literal notranslate"><span class="pre">$DLND_CPLHIST_CASE.cpl.hl2x1yr_glc.yyyy-01-01.nc</span></code>)</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">DLND_CPLHIST_YR_START</span></code>: First year of forcing data</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">DLND_CPLHIST_YR_START</span></code> can be set later than the first existing year of data if
you want to use a subset of the available years. However, the data land model expects
to find domain information on the first year’s file; typically, this domain
information (variable names beginning with <code class="docutils literal notranslate"><span class="pre">doml</span></code>) only appears on the first
coupler history file. So, to start with something later than the first year, you will
need to copy all of these <code class="docutils literal notranslate"><span class="pre">doml_xxx</span></code> fields from the first file onto the file
corresponding to <code class="docutils literal notranslate"><span class="pre">DLND_CPLHIST_YR_START</span></code>. <strong>Make sure you copy ALL of the</strong>
<code class="docutils literal notranslate"><span class="pre">doml_xxx</span></code> <strong>fields (otherwise you may get garbage results).</strong></p>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">DLND_CPLHIST_YR_END</span></code>: Last year of forcing data (can be set earlier
than the last existing year of data if you want to use a subset of the
available years)</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">RUN_STARTDATE</span></code>: Determines the model year in which the run starts. This can be set to
anything you want, but a good convention is:</p>
<ul class="simple">
<li>For transient T compset runs forced by output from a transient CESM run, set to the
first year of forcing data (this corresponds to the real-world year, in some sense)</li>
<li>For non-transient T compset runs (forced either by output from a non-transient run, or
by cycling through the available forcing data multiple times), set to 0001-01-01 (in
this case, there is no real-world meaning to the start year)</li>
</ul>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">DLND_CPLHIST_YR_ALIGN</span></code>: The simulation year corresponding to
<code class="docutils literal notranslate"><span class="pre">DLND_CPLHIST_YR_START</span></code>. This will usually be the same as the year in
<code class="docutils literal notranslate"><span class="pre">RUN_STARTDATE</span></code>, but it can be set to a different year to start the simulation with a
different year of forcing data.</p>
</li>
</ul>
<p>To confirm you have set up the paths and file names correctly, run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./preview_namelists</span>
</pre></div>
</div>
<p>and examine the generated file, <code class="docutils literal notranslate"><span class="pre">CaseDocs/dlnd.streams.txt.sno.cplhist</span></code>.</p>
</div>
</div>
<div class="section" id="changes-to-some-cesm-defaults-for-t-compsets">
<h2>3.4. Changes to some CESM defaults for T compsets<a class="headerlink" href="#changes-to-some-cesm-defaults-for-t-compsets" title="Permalink to this headline">¶</a></h2>
<p>T compsets have much lower computational expense per simulation year and much greater
typical run lengths compared to most CESM configurations. Thus, a number of settings are
changed automatically when running with a T compset. These include:</p>
<ul class="simple">
<li>Default run length: 5 years (rather than 5 days)</li>
<li>Default coupling frequency: annual (rather than daily or more frequent)</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dynamic-ice-sheet-model.html" class="btn btn-neutral float-right" title="4. The dynamic ice sheet model" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="running-and-modifying.html" class="btn btn-neutral" title="2. Running and modifying the CESM land ice component" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Gunter Leguy, William Lipscomb, Bill Sacks.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
     
<script>var version_json_loc = "../versions.json";</script>


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'cesm2.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="_static/pop_ver.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>